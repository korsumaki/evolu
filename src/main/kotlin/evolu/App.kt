/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package evolu

class App {
    val greeting: String
        get() {
            return "Hello world."
        }
}

/*
* + Field
* - Robot
*     - Position, direction
*     - Genome
*       - String[54]
*     - Statistics
*       - collected diamonds
*       - used steps
*     - Cpu
*
* */

fun main() {
    println("Evolution starts now...")
    val stepLimit = 1000

    val field = Field(7,7)
    field.randomize()

    val robot = Robot(field)
    robot.randomizePosition()
    robot.randomizeDirection()

    field.visualize(robot.currentPosition)

    // run code until instruction limit or all diamonds found
    while (field.numOfDiamondsLeft > 0 && robot.statistics.usedSteps < stepLimit) {
        val spotCode = field.getSpotCode(robot.currentPosition, robot.currentDirection)
        robot.execute(spotCode)
    }
    println("End. ${field.numOfDiamondsLeft} diamonds left. Used steps ${robot.statistics.usedSteps}")

    println("genome: ${robot.genome}")
    // print statistics
}
